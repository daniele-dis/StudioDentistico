<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Ricerca Trattamento</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>Cerca Paziente</h1>

    {% if not ricerca_effettuata %}
        <form method="POST" action="{{ url_for('visualizzatrattamenti') }}">
            <label for="nome">Nome:</label>
            <input type="text" id="nome" name="nome" required autocomplete="off">
            <label for="cognome">Cognome:</label>
            <input type="text" id="cognome" name="cognome" required autocomplete="off">
            <button type="submit" class="pulsante-azione" style="width: 200px;">
                Cerca
            </button>
        </form>
    {% endif %}

    {% if errore %}
        <p style="color: red;">{{ errore }}</p>
    {% endif %}

    {% if ricerca_effettuata %}
        <p>Hai cercato il paziente: {{ nome }} {{ cognome }}</p>
        
        {% if pazienti %}
            <h2>Risultati:</h2>
        <table border="1" cellpadding="5" cellspacing="0" style="width:1000px; table-layout: fixed;">
            <tr>
                <th style="width: 120px;text-align: center;">Nome</th>
                <th style="width: 120px;text-align: center;">Cognome</th>
                <th style="width: 260px;text-align: center;">Codice Fiscale</th>
                <th style="width: 1000px; text-align: center;">Azioni</th>
            </tr>
            {% for p in pazienti %}
            <tr style="height: 50px;"> <!-- altezza minima per la riga -->
                <td style="text-align: center; vertical-align: middle;">{{ p.nome }}</td>
                <td style="text-align: center; vertical-align: middle;">{{ p.cognome }}</td>
                <td style="text-align: center; vertical-align: middle;">{{ p.codice_fiscale }}</td>
                <td style="text-align: center; vertical-align: middle;">
                    <div style="display: flex; justify-content: center; align-items: center; gap: 6px; height: 100%;">
                        <a href="{{ url_for('mostra_trattamenti_paziente', paziente_id=p.id) }}">
                            <button style="background-color: #00d026; color: white; padding: 8px 10px; font-size: 13px; border: none; border-radius: 4px; cursor: pointer; white-space: nowrap; min-width: 120px;">
                                Vis Tratt
                            </button>
                        </a>
                        <a href="{{ url_for('modifica_trattamenti', paziente_id=p.id) }}">
                            <button style="background-color: #ffc107; color: black; padding: 8px 10px; font-size: 13px; border: none; border-radius: 4px; cursor: pointer; white-space: nowrap; min-width: 120px;">
                                Mod Tratt
                            </button>
                        </a>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </table>



        {% else %}
        <p>Nessun paziente trovato con quel Nome e Cognome.</p>
        {% endif %}
       <a href="{{ url_for('reset_ricerca') }}" class="pulsante-azione" style="font-weight: bold;">
            Ricerca Altro Paziente
        </a>
    {% endif %}
    

        <form action="{{ url_for('home') }}" method="get">
        <button type="submit" class="submit-btn" id="torna-home">Torna alla Home</button>
    </form>
</body>
</html>
